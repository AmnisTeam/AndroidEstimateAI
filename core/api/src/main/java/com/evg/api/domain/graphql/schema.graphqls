schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

type Query {
  getTestsResponse(page: Int!): GetTestsResponse!
}

type Mutation {
  registerUserResponse(data: UserRegistrationDTO!): UserRegistrationResponse!
  loginUserResponse(data: UserLoginDTO!): UserLoginResponse!
  passwordResetResponse(data: PasswordResetDTO!): PasswordResetResponse!
  createEssayTestResponse(data: CreateEssayTestDTO!): CreateEssayTestResponse!
}

type Subscription {
  onTestProgressResponse(listIds: [Int!]!): OnTestProgressResponse!
}

input UserRegistrationDTO {
  email: String!
  password: String!
}
type UserRegistrationResponse {
  code: Int!
}

input UserLoginDTO {
  email: String!
  password: String!
}
type UserLoginResponse {
  token: String!
  code: Int!
}

input PasswordResetDTO {
  email: String!
}
type PasswordResetResponse {
  code: Int!
}

input CreateEssayTestDTO {
  essay: String!
}
type CreateEssayTestResponse {
  code: Int!
  id: Int!
}

union TestResult = ReadyTest | LoadingTest | ErrorTest
type GetTestsResponse {
  code: Int!
  count: Int!
  pages: Int!
  next: Int
  prev: Int
  tests: [TestResult!]!
}

type OnTestProgressResponse {
  code: Int!
  tests: [TestResult!]!
}
type ReadyTest {
  id: Int!
  title: String!
  type: String!
  status: String!
  level: String!
  createdAt: Int!
}
type LoadingTest {
  id: Int!
  type: String!
  progress: Int!
  queue: Int!
  createdAt: Int!
}
type ErrorTest {
  id: Int!
  type: String!
  createdAt: Int!
}